<!DOCTYPE HTML>
<head>
  <title>Boxes Adventure</title>
    
<link href="assets/style.css" rel="stylesheet" type="text/css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
  <script src="assets/profiles.js"></script>
  <script src="assets/rezzables.js"></script>
  <script src="assets/main.js"></script>
</head>
<body>
    
  <canvas id="canvas"></canvas>
    
  <h3>A, D or Arrow keys to move, W or space to jump</h3>
    
   
  <script>
      
      // manually force window orientation event to fire.
      $.mobile.orientationChangeEnabled = false
      
      // load map file
      var map_file = getParameterByName('map');      
      if(!map_file) map_file = 1;      
      var script = document.createElement("script");      
      script.src = 'assets/maps/js/'+map_file+'.js';      
      document.body.appendChild( script );
      
      // load canvas
      var canvas = document.getElementById("canvas");
      Game.init(canvas);
      
      // listen to keystrokes
      document.body.addEventListener("keydown", function (e) {
        Game.keys[e.keyCode] = true;
      });

      document.body.addEventListener("keyup", function (e) {
        Game.keys[e.keyCode] = false;
      });
      
      // load game function
      var load_game = function () {
          
          // remove click to start
          canvas.removeEventListener('mousedown', load_game);
        
          Game.start(map);
          
          Game.update();
          
      };

      // click to start
      canvas.addEventListener('mousedown', load_game);
      
      // load start screen
      window.addEventListener("load", Game.start_screen);      
  </script>
</body>
